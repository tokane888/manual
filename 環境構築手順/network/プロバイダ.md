# プロバイダ設定

* OCNで動確

## ラズパイからONU(回線終端装置)に直接つなげる手順

* apt install -y pppoe pppoeconf
* 下記をバックアップ
    * /etc/ppp/peers/dsl-provider
    * /etc/network/interfaces
    * /etc/ppp/*-secrets
* pppoe接続設定
    * pppoeconf
        * いくつか質問が出る
            * プロバイダのuser名、パスなど入力
            * OS起動時に自動接続するように設定
        * 毎回手動接続する場合、下記でコマンド実行
            * 接続開始: pon dsl-provider
            * 接続終了: poff
            * 状態確認
                * plog
                * ip addr show ppp0
* reboot
    * 再起動するまでは正常に接続されない

## トラブルシューティング

* VDSLに直接有線接続した場合に、youtube, googleだけつながる
    * 原因
        * ダイヤルアップ設定が機能していない可能性がある
    * 対応
        * VDSLへ直接有線接続してダイヤルアップ設定、動確
            * Win+iで設定画面起動
            * "ネットワークとインターネット" => "ダイヤルアップ"
            * "新しい接続を設定する"以外の項目があれば接続して同格
            * "新しい接続を設定する"以外の項目がなければ、"新しい接続を設定する"押下
            * "インターネットへ接続します" => "次へ"
            * "新しい接続をセットアップします"
            * "ブロードバンド(PPPoE)(R)"
            * プロバイダから送付されている認証ID, パスワード入力
            * 設定名記入
            * "このパスワードを記録する"有効化
            * "接続"
            * 再起動すると、タスクトレイから上記設定を有効化しないといけないので、接続したまま放置
        * 無線LANルーターへ、上記設定が適用されているか確認
            * Buffaloのルーターの場合
                * ブラウザからルーターへログイン
                * "詳細設定" => "Internet" => "PPPoE"
                * 接続先リストを必要に応じて修正
                * ルーター再起動
                    * 再起動するまでgoogleへのpingが4/100回失敗するケースがあったため
